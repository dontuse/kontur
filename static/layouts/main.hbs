<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <script src="static/publish/html5shiv.min.js"></script>
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link rel="stylesheet" href="static/publish/style.css"/>
</head>
<body class="b-page">
<header class="b-header b-wrap">
    <div class="b-header__container-1">
        {{>b-logo}}
    </div>
    <div class="b-header__container-2">
        Контур. Тестовое задание.
    </div>
    <div class="b-header__container-3">

    </div>
</header>

<div class="b-wrap b-content">
    {{>body}}
</div>

<footer class="b-footer b-wrap">
    © Andrey Bayandin
</footer>


<script type="text/html" id = "KonturComponent">
    <div class="b-kontur-c" data-bind="sticky">
        <div class="b-kontur-c__head">
            <button data-bind='click: addItem' class="b-button b-kontur-c__add" type="button">Добавить cтрочку</button>
        </div>
        <div class="b-kontur-c__cy">Сумма, р.:</div>
        <div data-bind="foreach:data.elements">
            <div class="b-kontur-c__el">
                <div data-bind="css: { 'b-kontur-c__el-row_s_save': edit() }" class="b-kontur-c__el-row" >
                    <span data-bind="currency:val , click: $parents[0].startEdit , visible: !edit()" class="b-kontur-c__val"></span>
                    <input data-bind="value:val, enterKey:$parents[0].saveItem, visible: edit() " class="b-input b-kontur-c__nu-inp">
                    <button data-bind="click:$parents[0].saveItem , visible: edit()" class="b-button b-kontur-c__save" type="button">
                        Cохранить
                    </button>
                    <a data-bind="click:$parents[0].removeItem , visible: !edit()" class="b-kontur-c__remove" href="">Удалить</a>
                </div>
            </div>
        </div>
        <div class="b-kontur-c__total">
            <span class="b-kontur-c__sticky ">Итого:
                <b data-bind="currency:total" class="b-kontur-c__total-val"></b>
            </span>
        </div>
    </div>
</script>


<script src="static/js/bower_components/jquery/jquery.js"></script>
<script src="static/js/bower_components/knockoutjs/dist/knockout.debug.js"></script>
<script src="static/js/Sticky.js"></script>
<script src="static/js/ko.bindings.extend.js"></script>
<script src="static/js/KonturComponentVM.js"></script>



<script>

    // app vm
    vm = function() {
        var self = this;

        self.calc1 =  {
            elements: ko.observableArray([
                {
                    val: ko.observable(11782),
                    edit: ko.observable(false)
                },
                {
                    val: ko.observable(3678),
                    edit: ko.observable(false)
                },
                {
                    val: ko.observable(678),
                    edit: ko.observable(false)
                },
                {
                    val: ko.observable(-5423),
                    edit: ko.observable(false)
                }
            ])
        };


        self.calc2 =  {
            elements: ko.observableArray([])
        };
    };

    $(function(){
        ko.applyBindings(new vm());

    });

    $(window).load(function() {


       // setTimeout(sticky, 3000);
    });
</script>





</body>
</html>